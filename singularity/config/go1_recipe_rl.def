BootStrap: docker
From: leggedroboticsusp/legged-ws:ros-melodic-legged

%setup
    # runs before the container creation. In this section, we have access to all folders of our home machine

%environment
    export source_melodic="source /opt/ros/melodic/setup.bash"

%post
    apt-get update -y
    apt-get install ros-melodic-rosmon-core -y
    apt-get install -y ipython python-rospkg python3-pip
    apt-get update -y

    pip3 install pyyaml
    pip3 install rospkg
    pip3 install scipy
    pip3 install torch
    pip3 install pandas 
    pip3 install gym
    pip3 install stable-baselines3

%startscript
#!/bin/bash
    source /opt/ros/melodic/setup.bash
    source ~/catkin_ws/devel/setup.bash
    exec "$@"

%runscript
#!/bin/bash
    source /opt/ros/melodic/setup.bash
    source ~/catkin_ws/devel/setup.bash
    exec "$@"

%test
    python3 -c 'import sys; print(sys.version)'